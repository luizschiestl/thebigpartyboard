(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),s=n(46),o=n.n(s),r=(n(58),n(105)),c=n(107),u=n(106),l=n(47),h=n.n(l),d=(n(90),n(6)),v=n.n(d),m=n(12),f=n(13),p=n(14),w=n(17),b=n(15),g=n(19),k=n(18),y=function(t){function e(t){var n;return Object(f.a)(this,e),(n=Object(w.a)(this,Object(b.a)(e).call(this))).state={canvasWidth:window.innerWidth,canvasHeight:window.innerHeight,brushColor:t.brushColor,brushRadius:10,save:null,socket:null},n}return Object(g.a)(e,t),Object(p.a)(e,[{key:"setColor",value:function(){this.setState({brushColor:"#"+Math.random().toString(16).slice(2,8)})}},{key:"initSocket",value:function(){this.props.socket.on("connect",function(){})}},{key:"updateDimensions",value:function(){this.setState({canvasWidth:window.innerWidth,canvasHeight:window.innerHeight-80})}},{key:"componentDidMount",value:function(){this.initSocket(),this.updateDimensions(),this.setColor(),window.addEventListener("resize",this.updateDimensions.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions.bind(this))}},{key:"switchToEraser",value:function(){this.setState({brushColor:"#ffffff",brushRadius:30})}},{key:"switchToBrush",value:function(){this.setState({brushColor:this.props.brushColor,brushRadius:10})}},{key:"save",value:function(){var t=Object(m.a)(v.a.mark(function t(e){var n;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.getSaveData(),t.next=3,this.setState({save:n});case 3:this.props.socket.emit("savedDrawing",{save:this.state.save,height:this.state.canvasHeight,width:this.state.canvasWidth}),e.clear();case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return i.a.createElement("div",null,i.a.createElement(k.a,{canvasWidth:this.state.canvasWidth,canvasHeight:this.state.canvasHeight,hideGrid:!0,lazyRadius:0,brushColor:this.state.brushColor,brushRadius:this.state.brushRadius,catenaryColor:"rgba(0, 0, 0, 0)",ref:function(e){return t.saveableCanvas=e},backgroundColor:"rgba(0,0,0,0)"}),i.a.createElement("div",{className:"buttons"},i.a.createElement("button",{onClick:function(){return t.saveableCanvas.undo()}},"Undo"),i.a.createElement("button",{onClick:function(){return t.saveableCanvas.clear()}},"Clear"),i.a.createElement("button",{onClick:function(){return t.save(t.saveableCanvas)}},"Send")))}}]),e}(a.Component),C=n(51),E=n.n(C),S=function(t){function e(t){var n;return Object(f.a)(this,e),(n=Object(w.a)(this,Object(b.a)(e).call(this))).loadSavedData=function(){n.state.socket.on("savedDrawing",function(t){var e=t.save,a=t.height,s=t.width;if(e){var o=JSON.parse(e),r=s,c=a,u=0,l=0;o.lines.map(function(t){return t.points.map(function(t){r>t.x&&(r=t.x),c>t.y&&(c=t.y),u<t.x&&(u=t.x),l<t.y&&(l=t.y)})}),o.lines.map(function(t){return t.points.map(function(t){t.x=t.x-r+15,t.y=t.y-c+15})}),o.width=u-r+30,o.height=l-c+30;var h=0,d=0;o.width>o.height?(d=300,h=300*o.height/o.width):(d=300*o.width/o.height,h=300);var v=n.state.componentList;v.push(i.a.createElement(k.a,{disabled:!0,loadTimeOffset:10,className:"moving-canvas",brushColor:"rgba(0,0,0,0)",catenaryColor:"rgba(0, 0, 0, 0)",canvasWidth:d,canvasHeight:h,hideGrid:!0,ref:function(t){return n.loadableCanvas=t},saveData:JSON.stringify(o),backgroundColor:"rgba(0,0,0,0)"})),n.setState(v)}})},n.state={divWidth:window.innerWidth,divHeight:window.innerHeight,componentList:[],socket:null,save:null},n}return Object(g.a)(e,t),Object(p.a)(e,[{key:"initSocket",value:function(){var t=this.props.socket;t.on("connect",function(){console.log("Connected")}),this.setState({socket:t})}},{key:"updateDimensions",value:function(){this.setState({divWidth:window.innerWidth,divHeight:window.innerHeight-50})}},{key:"componentDidMount",value:function(){var t=Object(m.a)(v.a.mark(function t(){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initSocket();case 2:this.loadSavedData(),this.updateDimensions(),window.addEventListener("resize",this.updateDimensions.bind(this));case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions.bind(this))}},{key:"render",value:function(){var t=this.state.componentList;return i.a.createElement("div",null,i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"title-board"},i.a.createElement("h2",null,"The Big Party Board!"),i.a.createElement("h3",null,"Go to ",this.props.localUrl,"/#/draw to start")),i.a.createElement("div",{className:"display-board",width:this.state.divWidth,height:this.state.divHeight},t.map(function(t,e){return i.a.createElement(i.a.Fragment,{key:e},t)}))),i.a.createElement(E.a,{className:"qrcode",value:this.props.localUrl+"/#/draw",bgColor:"#000",fgColor:"#fff",size:148}))}}]),e}(a.Component),W=h()();var D=function(){return i.a.createElement(r.a,null,i.a.createElement(c.a,null,i.a.createElement(u.a,{exact:!0,path:"/draw",render:function(){return i.a.createElement(y,{socket:W})}}),i.a.createElement(u.a,{exact:!0,path:"/",render:function(){return i.a.createElement(S,{socket:W,localUrl:"http://10.0.0.108"})}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},53:function(t,e,n){t.exports=n(102)},58:function(t,e,n){},87:function(t,e){},90:function(t,e,n){}},[[53,1,2]]]);
//# sourceMappingURL=main.aa889fd5.chunk.js.map